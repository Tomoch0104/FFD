# バーンスタイン
Free-Form-Deformation(FFD)を使用して2D画像の変形を行おうと試みているが，FFDはベジエ(Bezier)曲面で表される座標系を使用して変形する．<br>
そこで，ベジエ曲線を復習を兼ねてmatplotlibで描画してみる．<br>
ベジエ曲線を2次元に閣僚するとベジエ曲面となる．<br>
まずは，単純なベジエ曲線を描画する．

## ベジエ曲線の定義
ベジエ曲線は次式で表される曲線である．
$$
    P(t) = \sum_{i=0}^nB_i^n(t)\bm{q_i},  0 \leq t \leq 1\\
    B_i^n(t) = {}_nC_it^i(1-t)^{n-i}
$$

${}_nC_i$は二項係数で，$\binom{n}{i}$と表記する場合もあり，以下の式で展開される．<br>
B_i^n(t)は，バーンスタイン(Bernstein)多項式と呼ばれる．<br>
$\bm{q_i}$は制御点で，$n$はベジエ曲線の次数である．<br>
ベジエ曲線は，始点$\bm{q_0}$と終点$\bm{q_n}$を通る．<br>

<br><br>

# ベジエ曲面
ベジェ曲面は，以下の式で表される．
$$
\bm{X}(u,v) = \sum_{i=0}^{m}\sum_{j=0}^{n}B_i^m(u)B_j^n(v)\bm{q_{ij}},  0\leq u\leq 1, 0\leq v\leq 1
$$

$B_i^n(t)$は，[前節](#バーンスタイン)で説明したバースタイン(Bernstein)多項式である．<br>
$\bm{q_{ij}}$は，平面上に格子状に配置した制御点で，$m,n$は，それぞれ$u$軸，$v$軸方向の制御点の次数である．<br>
曲面の四隅は，制御点の四隅を通る．

<br><br>

# FFDとは

Free-Form Deformation（フリーフォームの変形）の略．
テクスチャの変形に使われる自由形状変形手法．
FFDは，ベジェ曲面を用いて座標系を変形する．
FFDによる座標系(u,v)の変形は，制御点を$\bm{P_{ij}}$とすると，以下の式で表される．
$$
\bm{X}(u,v) = \sum_{i=0}^{m}\sum_{j=0}^{n}B_i^m(u)B_j^n(v)\bm{P_{ij}},  0\leq u\leq 1, 0\leq v\leq 1\\
B_i^n(t) = {}_nC_it^i(1-t)^{n-i}
$$

これは，[前節](#ベジエ曲面)で説明したベジエ曲面の式と同じである．<br>

FFDを使用してテクスチャを変形するには，テクスチャを格子状の頂点で構成される面に貼り付けた後，頂点をFFDで変形する．<br>
なお，テクスチャを貼り付ける面は格子状でなくてもよい．

<br><br>